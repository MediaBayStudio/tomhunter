function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(){if("undefined"!=typeof window)try{let a=new window.CustomEvent("test",{cancelable:!0});if(a.preventDefault(),!0!==a.defaultPrevented)throw new Error("Could not prevent default")}catch(a){let b=function(a,b){let c,d;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),d=c.preventDefault,c.preventDefault=function(){d.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(a){this.defaultPrevented=!0}},c};b.prototype=window.Event.prototype,window.CustomEvent=b}})(),function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.SimpleMenu=a()}(function(){function a(){h.removeChild(c.overlay.tag),c.overlay.tag.removeEventListener("animationend",a)}function b(a,b,c){let d;return function(){let e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}}let c,d,f,g=document.head,h=document.body,i=function(){function e(a){for(let b in _classCallCheck(this,e),c=this,c.defaults={menu:{selector:"",class:"active",animationDuration:.5,animationTimigFunc:"ease"},openBtn:{selector:"",class:"",toggleClass:"",addClass:"animationstart",removeClass:"animationstart"},closeBtn:{selector:"",class:"",toggleClass:"",addClass:"animationstart",removeClass:"animationstart"},overlay:{selector:"",class:"active",bgc:"rgba(0,0,0,.5)",zi:"10",css:"",animationDuration:.5,animationTimigFunc:"ease"},desktop:!1,mediaQuery:"",toTop:!1,toBottom:!1,toLeft:!1,toRight:!1,fade:!1,swipe:!0,swipeThreshold:.3,pageScrolling:!1,scrollingPxs:50,overlayClick:!0,container:!0,esc:!0},f=c.options=a||{},c.defaults)if(void 0===f[b])f[b]=c.defaults[b];else if("string"!=typeof f[b]&&!1!==f[b])for(let a in c.defaults[b])void 0===f[b][a]&&(f[b][a]=c.defaults[b][a]);else"string"==typeof f[b]&&"string"!=typeof c.defaults[b]&&(c.defaults[b].selector=f[b],f[b]=c.defaults[b]);if(""!==f.mediaQuery&&(f.desktop=!0),f.fade&&(f.swipe=!1,f.container=!1),delete c.defaults,c.checkMedia(),window.addEventListener("resize",b(c.checkMedia,100)),d)return d.tag}return _createClass(e,[{key:"checkMedia",value:function(a){f.desktop?""===f.mediaQuery?!a&&c.buildMenu():window.matchMedia(f.mediaQuery).matches?a&&"resize"===a.type?d?!d.actived&&c.restoreEvents():c.buildMenu():c.buildMenu():a&&"resize"===a.type&&c.menu&&d.actived&&c.destroyEvents():/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?a&&"resize"===a.type?d?!d.actived&&c.restoreEvents():c.buildMenu():c.buildMenu():a&&"resize"===a.type&&c.menu&&d.actived&&c.destroyEvents()}},{key:"buildMenu",value:function(){c.init(),c.initOverlay(),c.initMenu()}},{key:"initOverlay",value:function(){c.overlay=function(){let a,b=f.overlay;return!1!==b&&(""===b.selector?(b.isCreated=!0,a=document.createElement("div"),a.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:".concat(b.bgc,";z-index:").concat(b.zi,";").concat(b.css),c.buildAnimation(b,["fi","fo"],["opacity:0","opacity:1"])):(b.isCreated=!1,a=document.querySelector(b.selector||b)),b.tag=a,a?b:console.warn("You'r overlay is not found!"))}()}},{key:"initMenu",value:function(){c.menu=function(){function b(a){a.class&&(a.toggleClass?d.tag.addEventListener(a.toggleClass,function(){a.tag.classList.toggle(a.class)}):(d.tag.addEventListener("animationstart"===a.addClass?"beforeopen":"open",function(){a.tag.classList.add(a.class)}),d.tag.addEventListener("animationstart"===a.removeClass?"beforeclose":"close",function(){a.tag.classList.remove(a.class)})))}let e=c.findElement(f.menu,"Menu");if(d=e,c.tag=d.tag,b(c.openBtn),c.closeBtn&&b(c.closeBtn),d.tag.open=c.open=d.open=function(){function a(){let e=new CustomEvent("open");d.tag.dispatchEvent(e),d.opened=!0,window.addEventListener("resize",d.close,{once:!0}),f.pageScrolling||window.addEventListener("scroll",d.close),f.esc&&document.addEventListener("keyup",d.close),c.closeBtn&&c.closeBtn.tag.addEventListener("click",d.close),b&&f.overlayClick&&b.tag.addEventListener("click",d.close),d.tag.removeEventListener("animationend",a)}let b=c.overlay,g=d.wrap;d.tag.classList.add(d.class),-1===navigator.userAgent.search(/edge/i)&&d.tag.scrollHeight>d.tag.offsetHeight&&0<d.tag.scrollTop&&d.tag.scrollTo(0,0),d.pageYscroll=pageYOffset,d.width||(d.width=d.tag.offsetWidth),f.fade||(!d.height&&(d.height=d.tag.offsetHeight),g.style.minWidth!=="".concat(d.width,"px")&&(g.style.minWidth="".concat(d.width,"px")),g.style.minHeight!=="".concat(d.height,"px")&&(g.style.minHeight="".concat(d.height,"px"))),f.container&&(d.tag.style.position="relative"),c.setAnimationFor(d,d.animationIn),b&&(b.isCreated?(c.setAnimationFor(b,b.animationIn),h.appendChild(b.tag)):b.tag.classList.add(b.class)),f.container&&(d.parent.appendChild(g),g.appendChild(d.tag),d.contained=!0),c.openBtn.tag.removeEventListener("click",d.open);let i=new CustomEvent("beforeopen");d.tag.dispatchEvent(i),d.tag.addEventListener("animationend",a)},d.tag.close=c.close=d.close=function(){function b(){let a=new CustomEvent("close");d.tag.dispatchEvent(a),c.openBtn.tag.addEventListener("click",d.open),d.opened=!1,d.tag.classList.remove(d.class),d.tag.style.transform="",d.tag.style.willChange="",f.container&&(d.parent.appendChild(d.tag),d.parent.removeChild(d.wrap),d.contained=!1),d.tag.removeEventListener("animationend",b)}let e=c.overlay;if(!(event&&"keyup"===event.type&&27!==event.keyCode)&&!(event&&"scroll"===event.type&&Math.abs(d.pageYscroll-pageYOffset)<f.scrollingPxs)){c.setAnimationFor(d,d.animationOut),e&&(e.isCreated?(c.setAnimationFor(e,e.animationOut),e.tag.addEventListener("animationend",a)):e.tag.classList.remove(e.class)),c.closeBtn&&c.closeBtn.tag.removeEventListener("click",d.close),e&&f.overlayClick&&e.tag.removeEventListener("click",d.close),f.swipe&&d.tag.removeEventListener("touchmove",d.swipeMove),f.pageScrolling||window.removeEventListener("scroll",d.close),f.esc&&document.removeEventListener("keyup",d.close),window.removeEventListener("resize",d.close);let g=new CustomEvent("beforeclose");d.tag.dispatchEvent(g),d.tag.addEventListener("animationend",b)}},d.getTransform=function(){return+d.tag.style.transform.replace(/[^0-9-.]*/g,"")},!f.fade){let a,b,c,e,g,h,i,j,k;d.swipeStart=function(){d.tag.style.willChange="transform";let e=event.touches[0]||window.event.touches[0];i=c=+e.clientX.toFixed(),k=g=+e.clientY.toFixed(),d.tag.addEventListener("touchmove",d.swipeMove),d.tag.addEventListener("touchend",function(){return a=b=!1},{once:!0})},d.swipeMove=function(){let j=event.touches[0]||window.event.touches[0];h=g-j.clientY.toFixed(),g=j.clientY.toFixed(),e=c-j.clientX.toFixed(),c=j.clientX.toFixed(),a||b||(9<Math.abs(h)?b=!0:5>Math.abs(h)&&(a=!0)),a&&f.toLeft&&c>i||f.toRight&&c<i?(d.tag.addEventListener("touchend",d.swipeEnd),d.tag.style.transform="translateX(".concat(d.getTransform()-e,"px)")):(b&&f.toBottom&&d.tag.offsetHeight+d.tag.scrollTop>=d.tag.scrollHeight&&g<k||f.toTop&&0===d.tag.scrollTop&&g>k)&&(event.preventDefault(),d.tag.addEventListener("touchend",d.swipeEnd),d.tag.style.transform="translateY(".concat(d.getTransform()-h,"px)"))},d.swipeEnd=function(){d.tag.removeEventListener("touchend",d.swipeEnd),j=d.getTransform();let a=d.width*f.swipeThreshold;Math.abs(j)>=a?d.close():(d.tag.style.transform="translate(0)",d.tag.style.transition="transform ".concat(d.animationDuration,"s"),d.tag.addEventListener("transitionend",function(){return d.tag.style.transition=""},{once:!0}))},f.swipe&&d.tag.addEventListener("touchstart",d.swipeStart)}if(!f.fade){if(!f.toTop&&!f.toBottom&&!f.toLeft&&!f.toRight){let a=window.screen.width,b={left:+c.openBtn.tag.getBoundingClientRect().left.toFixed(),right:+(a-c.openBtn.tag.getBoundingClientRect().right).toFixed()};b.left>b.right?f.toLeft=!0:f.toRight=!0}let a={};a.top=getComputedStyle(d.tag).top,a.bottom=getComputedStyle(d.tag).bottom,a.left=getComputedStyle(d.tag).left,a.right=getComputedStyle(d.tag).right,f.toLeft?(c.buildAnimation(d,["fr","tr"],["translateX(100%)","translateX(0%)"]),d.tag.style.right=0,d.tag.style.left="auto"):f.toRight?(c.buildAnimation(d,["fl","tl"],["translateX(-100%)","translateX(0%)"]),d.tag.style.left=0,d.tag.style.right="auto"):f.toBottom?(d.tag.style.top=0,d.tag.style.bottom="auto",c.buildAnimation(d,["ft","tt"],["translateY(-100%)","translateY(0%)"])):f.toTop&&(c.buildAnimation(d,["fb","tb"],["translateY(100%)","translateY(0%)"]),d.tag.style.bottom=0,d.tag.style.top="auto");let b=d.wrap=document.createElement("div");b.style.cssText="position:absolute;overflow:hidden;",b.style.top="auto"===a.top&&f.toBottom?"0px":a.top,b.style.bottom="auto"===a.bottom&&f.toTop?"0px":a.bottom,b.style.left="auto"===a.left&&f.toRight?"0px":a.left,b.style.right="auto"===a.right&&f.toLeft?"0px":a.right,b.style.zIndex=a.zIndex,d.contained=!1,d.tag.style.top=0,d.tag.style.bottom="auto",d.parent=d.tag.parentElement}else if(!f.menu.animationIn&&!f.menu.animationOut)c.buildAnimation(d,["fi","fo"],["opacity:0","opacity:1"]);else if(!f.menu.animationIn||!f.menu.animationOut)return void console.error("Add another animaion!");return c.restoreEvents(),e}()}},{key:"destroyEvents",value:function(){c.openBtn.tag.removeEventListener("click",d.open),c.closeBtn&&c.closeBtn.tag.removeEventListener("click",d.close),d.actived=!1}},{key:"restoreEvents",value:function(){c.openBtn.tag.addEventListener("click",d.open),d.actived=!0}},{key:"init",value:function(){c.openBtn=function(){let a=c.findElement(f.openBtn,"Open button");return a}(),c.closeBtn=c.findElement(f.closeBtn,"Close button")}},{key:"findElement",value:function(a,b){let c;return""===a.selector?console.warn("".concat(b," selector is empty!")):c=document.querySelector(a.selector),a.tag=c,c?a:console.warn("".concat(b," is not found!"))}},{key:"buildAnimation",value:function(a,b,c){let d=["animationIn","animationOut"];for(let e=0;e<b.length;e++)c[e]=c[e].replace(/(translate(.*))/,"transform:$1"),a[d[e]]={name:b[e],key:"@keyframes ".concat(b[e],"{from{").concat(c[e],"}to{").concat(c[1==e?0:1],"}}")}}},{key:"setAnimationFor",value:function(b,c){function e(){c.key&&g.removeChild(a),b.tag.removeEventListener("animationend",e)}let a;c.key&&(a=document.createElement("style"),g.appendChild(a),a.textContent=c===d.animationOut?c.key.replace(/\(.*?\)/,"(".concat(d.getTransform(),")")):c.key),b.tag.style.animation="".concat(c.name," ").concat(b.animationDuration,"s ").concat(b.animationTimigFunc),b.tag.addEventListener("animationend",e)}}]),e}();return i});